@page "/Error"
@using System.Diagnostics

<PageTitle>Error</PageTitle>

<FluentStack Orientation="Orientation.Vertical" Style="padding: 2rem;">
    <FluentLabel Typo="Typography.H3" Style="color: var(--error);">⚠️ Error.</FluentLabel>
    <FluentLabel Typo="Typography.H4" Style="color: var(--error);">An error occurred while processing your request.</FluentLabel>

    @if (ShowRequestId)
    {
        <FluentCard Style="margin-top: 1rem;">
            <FluentLabel><strong>Request ID:</strong> <code>@RequestId</code></FluentLabel>
        </FluentCard>
    }

    <FluentCard Style="margin-top: 1.5rem;">
        <FluentStack Orientation="Orientation.Vertical" Style="gap: 0.5rem;">
            <FluentLabel Typo="Typography.H5">Development Mode</FluentLabel>
            <FluentLabel>
                Swapping to <strong>Development</strong> environment will display more detailed information about the error that occurred.
            </FluentLabel>
            <FluentLabel>
                <strong>The Development environment shouldn't be enabled for deployed applications.</strong>
                It can result in displaying sensitive information from exceptions to end users.
                For local debugging, enable the <strong>Development</strong> environment by setting the <strong>ASPNETCORE_ENVIRONMENT</strong> environment variable to <strong>Development</strong>
                and restarting the app.
            </FluentLabel>
        </FluentStack>
    </FluentCard>
</FluentStack>

@code{
    [CascadingParameter]
    private HttpContext? HttpContext { get; set; }

    private string? RequestId { get; set; }
    private bool ShowRequestId => !string.IsNullOrEmpty(RequestId);

    protected override void OnInitialized() =>
        RequestId = Activity.Current?.Id ?? HttpContext?.TraceIdentifier;
}
