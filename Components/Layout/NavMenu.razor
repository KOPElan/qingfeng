@using QingFeng.Utilities
@inject NavigationManager NavigationManager

<!-- Dock-style Navigation Menu -->
<div class="bottom-dock">
    <div class="dock-container">
        <NavLink href="/" Match="NavLinkMatch.All" class="dock-item">
            <div class="dock-icon-bg" style="background: var(--dock-gradient-dashboard);">
                <span class="material-symbols-outlined" style="font-size: 28px; color: rgb(55 65 81);">dashboard</span>
            </div>
            <span class="dock-tooltip">概览</span>
            <div class="dock-indicator @(IsActive("/") ? "" : "inactive")"></div>
        </NavLink>
        <NavLink href="/docker" class="dock-item">
            <div class="dock-icon-bg" style="background: var(--dock-gradient-terminal);">
                <span class="material-symbols-outlined" style="font-size: 28px; color: white;">terminal</span>
            </div>
            <span class="dock-tooltip">Docker</span>
            <div class="dock-indicator @(IsActive("/docker") ? "" : "inactive")"></div>
        </NavLink>
        <div class="dock-divider"></div>
        <NavLink href="/file-manager" class="dock-item">
            <div class="dock-icon-bg" style="background: var(--dock-gradient-files);">
                <span class="material-symbols-outlined" style="font-size: 28px; color: white;">folder_open</span>
            </div>
            <span class="dock-tooltip">文件</span>
            <div class="dock-indicator @(IsActive("/file-manager") ? "" : "inactive")"></div>
        </NavLink>
        <NavLink href="/system-monitor" class="dock-item">
            <div class="dock-icon-bg" style="background: var(--dock-gradient-settings);">
                <span class="material-symbols-outlined" style="font-size: 28px; color: rgb(55 65 81);">tune</span>
            </div>
            <span class="dock-tooltip">系统监控</span>
            <div class="dock-indicator @(IsActive("/system-monitor") ? "" : "inactive")"></div>
        </NavLink>
    </div>
</div>

@code {
    private bool IsActive(string href)
    {
        var relativePath = NavigationManager.ToBaseRelativePath(NavigationManager.Uri);
        if (href == "/")
        {
            return string.IsNullOrEmpty(relativePath);
        }
        return relativePath.StartsWith(href.TrimStart('/'));
    }
}
